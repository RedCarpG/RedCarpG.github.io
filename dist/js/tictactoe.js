const X_CLASS="x",O_CLASS="o",ROWS=[[0,1,2],[3,4,5],[6,7,8]],COLUMNS=[[0,3,6],[1,4,7],[2,5,8]],DIAGNOLS=[[0,4,8],[2,4,6]],tictactoe=document.getElementById("tictactoe"),cellElements=tictactoe.querySelectorAll("[data-cell]"),mainPage=tictactoe.querySelector(".main-page"),board=mainPage.querySelector(".board"),endGameInterface=tictactoe.querySelector(".end-game-interface"),endGameMessage=endGameInterface.querySelector(".end-game-message"),restartButton=tictactoe.querySelector(".restart-button");restartButton.addEventListener("click",handleRestart),cellElements.forEach((e=>{e.addEventListener("mouseover",handleMouseOver),e.addEventListener("mouseout",handleMouseOut)}));let circleTurn=!0;function startGame(){let e=0;cellElements.forEach((s=>{(s.classList.contains("x")||s.classList.contains("o"))&&(setTimeout((()=>{removeMark(s)}),e),e+=100),s.addEventListener("click",handleClick,{once:!0})})),setBoardHoverClass(setCircleTurn=circleTurn)}function handleClick(e){const s=e.target,t=circleTurn?"o":"x";placeMark(s,t),checkWinning(t)?endGame(isDraw=!1):checkDraw()?endGame(isDraw=!0):switchTurns()}function handleMouseOver(e){const s=e.target;if(s.classList.contains("x")||s.classList.contains("o"))return;const t=circleTurn?"o":"x";s.innerHTML="x"==t?'<embed class="mark-img-hover" src="./dist/img/x.svg" type="image/svg+xml" />':'<embed class="mark-img-hover" src="./dist/img/o.svg" type="image/svg+xml" />'}function handleMouseOut(e){const s=e.target;s.classList.contains("x")||s.classList.contains("o")||(s.innerHTML="")}function handleRestart(e){endGameInterface.classList.remove("show"),endGameInterface.classList.add("out"),endGameInterface.addEventListener("animationend",(()=>{endGameInterface.classList.remove("out"),endGameInterface.classList.add("hidden"),startGame()}),{once:!0}),circleTurn=!circleTurn,mainPage.classList.remove("blur"),mainPage.classList.add("focus")}function placeMark(e,s){e.classList.add(s),e.innerHTML="x"==s?'<embed class="mark-img" src="./dist/img/x.svg" type="image/svg+xml" />':'<embed class="mark-img" src="./dist/img/o.svg" type="image/svg+xml" />',e.addEventListener("animationend",(()=>{e.classList.remove("in")}),{once:!0}),e.classList.add("in")}function removeMark(e){e.classList.remove("x"),e.classList.remove("o"),e.classList.remove("glow"),e.addEventListener("animationend",(()=>{e.classList.remove("out"),e.innerHTML=""}),{once:!0}),e.classList.add("out")}function switchTurns(){circleTurn=!circleTurn,setBoardHoverClass(circleTurn)}function setBoardHoverClass(e){board.classList.remove(e?"x":"o"),board.classList.add(e?"o":"x")}function checkWinning(e){return[...ROWS,...COLUMNS,...DIAGNOLS].some((s=>!!s.every((s=>cellElements[s].classList.contains(e)))&&(s.forEach((e=>{cellElements[e].classList.add("glow")})),!0)))}function checkDraw(){return[...cellElements].every((e=>e.classList.contains("x")||e.classList.contains("o")))}function endGame(e){e?endGameMessage.innerText="Draw!":endGameMessage.innerHTML=(circleTurn?'<embed class="mark-img" src="./dist/img/o.svg" type="image/svg+xml" />':'<embed class="mark-img" src="./dist/img/x.svg" type="image/svg+xml" />')+" Wins!",setTimeout((()=>{endGameInterface.classList.remove("hidden"),endGameInterface.classList.add("show"),mainPage.classList.remove("focus"),mainPage.classList.add("blur")}),700)}startGame();